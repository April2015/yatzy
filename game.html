<!DOCTYPE html>
<html lang="en" ng-app="myApp" manifest="game.appcache">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Yatzy</title>
  <meta name="description" content="Yatzy game">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>

  <script src="game.js"></script>
  <script src="gameLogic.js"></script>

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-touch.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.1/ui-bootstrap-tpls.min.js"></script>
  
  <link rel="stylesheet" type="text/css" href="http://yoav-zibin.github.io/emulator/main.css">
  <link rel="stylesheet" type="text/css" href="game.css">
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">

  <script>
  window.angularTranslationLanguages = ['en','zh'];
  </script>
  <script src="http://yoav-zibin.github.io/emulator/dist/turnBasedServices.2.min.js"></script>
</head>
<body ng-cloak ng-controller="Ctrl">

 <div style="position:absolute; bottom:5px; left: 5px">
  <span ng-click="isHelpModalShown = true"
  class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>
 </div>
 
 <div class="overlayModal" ng-show="isHelpModalShown" aria-hidden="true">
  <div class="modal-backdrop in"></div>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" ng-click="isHelpModalShown = false" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">
          {{ 'RULES_OF_TICTACTOE' | translate }}
        </h4>
      </div>
      <div class="modal-body">
        <carousel style="height: 300px">
          <slide>
            <table>
              <tr >
                <td>
                  {{ 'RULES_SLIDE1' | translate }}
                </td>
                <td>
                  <img src="images/1.jpg" style="height:180px; ">
                </td>
              </tr>
            </table>
          </slide>
          <slide>
            <table>
              <tr >
                <td>
                  {{ 'RULES_SLIDE2' | translate }}
                </td>
                <td>
                  <img src="images/2.jpg" style="height:180px; ">
                </td>
              </tr>
            </table>
          </slide>
          <slide>
            <table>
              <tr >
                <td>
                  {{ 'RULES_SLIDE3' | translate }}                
                </td>
                <td>
                  <img src="images/3.jpg" style="height:180px; ">
                </td>
              </tr>
            </table>
          </slide>
          <slide>
            <table>
              <tr >
                <td>
                  {{ 'RULES_SLIDE4' | translate }}
                </td>
                <td>
                  <img src="images/4.jpg" style="height:180px; ">
                </td>
              </tr>
            </table>
          </slide>
          <slide>
            <table border="1" style="position:relative; left:10%; top:10%;">
              <tr>
                <td>ones</td>
                <td>{{'ONES'|translate}}</td>    
              </tr>
              <tr>
                <td>twos</td>
                <td>{{'TWOS'|translate}}</td>    
              </tr>
              <tr>
                <td>threes</td>
                <td>{{'THREES'|translate}}</td>    
              </tr>
              <tr>
                <td>fours</td>
                <td>{{'FOURS'|translate}}</td>    
              </tr>
              <tr>
                <td>fives</td>
                <td>{{'FIVES'|translate}}</td>    
              </tr>
              <tr>
                <td>sixes</td>
                <td>{{'SIXES'|translate}}</td>    
              </tr>
              <tr>
                <td>threeKind</td>
                <td>{{'THREEKIND'|translate}}</td>
              </tr>
              <tr>
                <td>fourKind</td>
                <td>{{'FOURKIND'|translate}}</td>
              </tr>
              <tr>
                <td>smallStraight</td>
                <td>{{'SMALLSTRAIGHT'|translate}}</td>
              </tr>
              <tr>
                <td>largeStraight</td>
                <td>{{'LARGESTRAIGHT'|translate}}</td>    
              </tr>
              <tr>
                <td>fullHouse</td>
                <td>{{'FULLHOUSE'|translate}}</td>
              </tr>
              <tr>
                <td>chance</td>
                <td>{{'CHANCE'|translate}}</td>    
              </tr>
              <tr>
                <td>yatzy</td>
                <td>{{'YATZY'|translate}}</td>    
              </tr>
              <tr>
                <td>bonus</td>
                <td>{{'BONUS'|translate}}</td>    
              </tr>
              
            </table>
          </slide>
          <slide>
            <table border="1" width="80%" style="position:relative; left:10%; top:10%;">
              <tr>
                <td>ones</td>
                <td>{{'ones'|translate}}</td>    
              </tr>
              <tr>
                <td>twos</td>
                <td>{{'twos'|translate}}</td>    
              </tr>
              <tr>
                <td>threes</td>
                <td>{{'threes'|translate}}</td>    
              </tr>
              <tr>
                <td>fours</td>
                <td>{{'fours'|translate}}</td>    
              </tr>
              <tr>
                <td>fives</td>
                <td>{{'fives'|translate}}</td>    
              </tr>
              <tr>
                <td>sixes</td>
                <td>{{'sixes'|translate}}</td>    
              </tr>
              <tr>
                <td>threekind</td>
                <td>{{'threekind'|translate}}</td>
              </tr>
              <tr>
                <td>fourkind</td>
                <td>{{'fourkind'|translate}}</td>
              </tr>
            </table>
          </slide>

          <slide>
            <table border="1" width="80%" style="position:relative; left:10%; top:10%;">
              <tr>
                <td>smallstraight</td>
                <td>{{'smallstraight'|translate}}</td>
              </tr>
              <tr>
                <td>largestraight</td>
                <td>{{'largestraight'|translate}}</td>    
              </tr>
              <tr>
                <td>fullhouse</td>
                <td>{{'fullhouse'|translate}}</td>
              </tr>
            </table>
          </slide>

          <slide>
            <table border="1" width="80%" style="position:relative; left:10%; top:10%;">
              <tr>
                <td>chance</td>
                <td>{{'chance'|translate}}</td>    
              </tr>
              <tr>
                <td>yatzy</td>
                <td>{{'yatzy'|translate}}</td>    
              </tr>
              <tr>
                <td>bonus</td>
                <td>{{'bonus'|translate}}</td>    
              </tr>
            </table>
          </slide>


          <slide>
            <table>
              <tr >
                <td>
                  {{ 'RULES_SLIDE6' | translate }}                
                </td>
              </tr>
            </table>
          </slide>
        </carousel>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" ng-click="isHelpModalShown = false">
          {{'CLOSE' | translate }}
        </button>
      </div>
    </div>
  </div>
</div>

<div id="gameArea">

  <svg id="draggingLines" width="100%" height="100%"
  style="display:none; position:absolute; z-index: 30;">
  <line id="horizontalDraggingLine"
  x1="0" y1="12.5%"
  x2="100%" y2="12.5%"
  stroke="red"
  stroke-width="1%"/>
</svg>
<div id="score-sheets" style="position: relative; width: 100%; height: 75%;">
  <div ng-repeat="playerIndex in [0,1]" style="position: absolute; left:{{playerIndex * 50}}%; width: 50%; height: 100%;">
    <div class="cell" style="position: absolute; width: 100%; height: 6.6%;">
      <b class="textMargin">{{ 'PLAYER' | translate }} {{playerIndex ? "2" : "1"}}</b>
    </div>
    <div ng-repeat="key in order track by $index" style="position: absolute; width: 100%; height: 6.6%; top:{{($index+1)*6.6}}%; left:0%;">
      <div class="cell" style="position: absolute; width: 50%; height: 100%;">
        <b class="textMargin">{{key}}</b>
      </div>
      <div class="cell" ng-click="scoreInCategory($index, 0)" ng-class="{dropIn: shouldDropIn(key, playerIndex)}"
      style="position: absolute; left:50%; width: 50%; height: 100%;">
      <b class="textMargin">{{board[playerIndex][key]}}</b>
    </div>
  </div>
</div>
</div>
<div id="dice" style="position: relative; width: 100%; height: 25%;">
  <div class="reroll" >
    <img ng-repeat="(key, diValue) in dice track by $index" ng-click="onClickReroll($index)" ng-src="images/{{diValue != null ? diValue : '1'}}.png" name="{{$index}}" ng-if="rerolls.indexOf(key) != -1"/>
    <span>{{ 'ROLL' | translate }} </span>
  </div>
  <div class="keep">
    <img ng-repeat="(key, diValue) in dice track by $index" ng-click="onClickKeep($index)" ng-src="images/{{diValue != null ? diValue : '1'}}.png" name="{{$index}}" ng-if="rerolls.indexOf(key) == -1"/>
    <span>{{ 'KEEP' | translate }}</span>
  </div>
  <div class="button" ng-click="rollDice()" ng-if="rollNumber < 4 && yourPlayerIndexForMatch == turnIndex && !waitForComputer">
    <b class="textMargin2">{{ 'ROLL_EM' | translate }}</b>
  </div>
</div>
</div>
</body>
</html>
